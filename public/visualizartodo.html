<script>
  async function cargarTodo() {
    const cont = document.getElementById('contenido');
    cont.innerHTML = '<p>Cargando datos...</p>';

    try {
      const res = await fetch('/api/visualizartodo');
      const datos = await res.json();

      if (!Array.isArray(datos) || datos.length === 0) {
        cont.innerHTML = '<p>No hay proyectos ni registros.</p>';
        return;
      }

      let html = `
        <div style="overflow-x: auto;">
          <table class="table table-bordered table-striped" style="min-width: 1200px;">
            <thead>
              <tr>
                <th>ID</th>
                <th>Título</th>
                <th>Categoría</th>
                <th>Descripción</th>
                <th>Responsable</th>
                <th>Participantes</th>
                <th>Estatus</th>
                <th>Kilos Reciclados</th>
                <th>Lugar</th>
                <th>Fecha de Entrega</th>
                <th>Horario</th>
                <th>Lugar de Recolección</th>
              </tr>
            </thead>
            <tbody>
      `;

      datos.forEach(d => {
        html += `
          <tr>
            <td>${d.idProyecto || ''}</td>
            <td>${d.titulo || ''}</td>
            <td>${d.categoria || ''}</td>
            <td>${d.descripcion || ''}</td>
            <td>${d.responsable || ''}</td>
            <td>${d.participantes || ''}</td>
            <td>${d.estatus || ''}</td>
            <td>${d.kilos_reciclados || ''}</td>
            <td>${d.lugar || ''}</td>
            <td>${d.fecha_entrega || ''}</td>
            <td>${d.horario || ''}</td>
            <td>${d.lugar_recoleccion || ''}</td>
          </tr>
        `;
      });

      html += '</tbody></table></div>';
      cont.innerHTML = html;

    } catch (error) {
      cont.innerHTML = `<p>Error al cargar los datos: ${error.message}</p>`;
    }
  }

  window.onload = cargarTodo;
</script>



